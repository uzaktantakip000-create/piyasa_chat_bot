apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: piyasa-chatbot

resources:
  - namespace.yaml
  - configmap.yaml
  # secret.yaml is NOT in git (security best practice)
  # Create manually: kubectl create secret generic piyasa-secrets --from-env-file=.env -n piyasa-chatbot
  # Or copy k8s/base/secret.yaml.template to secret.yaml and edit values
  # - secret.yaml  # Commented out - create manually!

  # PostgreSQL: Choose ONE (StatefulSet recommended for production)
  - postgres-deployment.yaml  # Simple Deployment (current, works but not best practice)
  # - postgres-statefulset.yaml  # StatefulSet (recommended, requires migration)

  - redis-statefulset.yaml
  - api-deployment.yaml
  - worker-statefulset.yaml
  - frontend-deployment.yaml
  - ingress.yaml
  - hpa.yaml

commonLabels:
  app.kubernetes.io/name: piyasa-chatbot
  app.kubernetes.io/version: "1.0.0"
  app.kubernetes.io/managed-by: kustomize
